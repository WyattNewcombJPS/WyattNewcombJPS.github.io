<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Bouncing Box</title>
	<script src="jquery.min.js"></script>
	<style>
		.box {
			width: 70px;
			height: 70px;
			background-color: teal;
			font-size: 300%;
			text-align: center;
			user-select: none;
			display: block;
			position: absolute;
			top: 100px;
			/* Change me! */
			left: 0px;
		}

		.board {
			height: 100vh;
		}
	</style>
	<!-- 	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->

</head>

<body class="board">
	<!-- HTML for the box -->
	<div class="box">?</div>

	<script>
		(function () {
			'use strict'
			/* global jQuery */

			//////////////////////////////////////////////////////////////////
			/////////////////// SETUP DO NOT DELETE //////////////////////////
			//////////////////////////////////////////////////////////////////

			var box = jQuery('.box');	// reference to the HTML .box element
			var board = jQuery('.board');	// reference to the HTML .board element
			var boardWidth = board.width();	// the maximum X-Coordinate of the screen

			// Every 50 milliseconds, call the update Function (see below)
			setInterval(update, 50);

			// Every time the box is clicked, call the handleBoxClick Function (see below)
			box.on('click', handleBoxClick);

			// moves the Box to a new position on the screen along the X-Axis
			function moveBoxTo(newPositionX) {
				box.css("left", newPositionX);
			}

			// changes the text displayed on the Box
			function changeBoxText(newText) {
				box.text(newText);
			}

			//////////////////////////////////////////////////////////////////
			/////////////////// YOUR CODE BELOW HERE /////////////////////////
			//////////////////////////////////////////////////////////////////

        // Variable declarations
        var positionX = 0; // Tracks the box's x-position
        var points = 0; // Tracks the score
        var speed = 10; // Tracks the box's speed

        // The update function - moves the box
        function update() {
            positionX = positionX + speed; // Increment positionX by speed
            moveBoxTo(positionX); // Move box based on positionX

            // TODO 6: Bounce off the right side
            if (positionX > boardWidth) {
                speed *= -1; // Reverse direction
            }

            // TODO 7: Bounce off the left side
            if (positionX < 0) {
                speed *= -1; // Reverse direction
            }
        }

        // The handleBoxClick function - resets position, updates score, and fixes speed bug
        function handleBoxClick() {
            positionX = 0; // Reset the position
            points++; // Increment points by 1

            // TODO 8: Calculate speed based on points using the linear formula
            speed = 3 * points + 10;

            changeBoxText(points); // Update the box text to show current score
        }

    })();
</script>
</body>

</html>